"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}var $=require("jquery");var Container=function Container(){var _this=this;this.setKV=function(k,v){return _this._map.set(k,v)};this.setKProps=function(k,props){if(_this._map.has(k))_this._weakMap.set(_this._map.get(k),props)};this.setVProps=function(v,props){if(Array.from(_this._map.values()).includes(v))_this._weakMap.set(v,props)};this.getVByK=function(k){return _this._map.get(k)};this.getPropsByK=function(k){return _this._weakMap.get(_this._map.get(k))};this.getPropsByV=function(v){return _this._weakMap.get(v)};this.getVsByProps=function(props){return Array.from(_this._map.values()).filter(function(v){return _this._matchProps(_this.getPropsByV(v),props)})};this.getKsByProps=function(props){var vSet=new Set(_this.getVsByProps(props));return Array.from(_this._map.keys()).filter(function(k){return vSet.has(_this._map[k])})};this._matchProps=function(foundProps,props){return foundProps&&Object.entries(props).every(function(_ref){var k1=_ref[0],v1=_ref[1];return foundProps[k1]===v1})};this.hasK=function(k){return _this._map.has(k)};this.hasV=function(v){return new Set(_this._map.values()).has(v)};this.hasPropsByK=function(k){return _this._weakMap.has(_this._map.get(k))};this.doms=function(){var _ref2=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(selector,searchInDom,event){var doms;return _regenerator.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(searchInDom===void 0){searchInDom=document}_context.next=3;return[].concat(searchInDom.querySelectorAll(selector));case 3:doms=_context.sent;if(typeof event==="object")doms.forEach(function(dom){return $(dom).off(Object.keys(event).join(" ")).on(event)});return _context.abrupt("return",doms);case 6:case"end":return _context.stop()}}},_callee)}));return function(_x,_x2,_x3){return _ref2.apply(this,arguments)}}();this.add=function(k,v,props){_this.setKV(k,v);_this.setVProps(v,props)};this.remove=function(k){return _this._map.delete(k)};this.updatePropsByK=function(k,props){if(_this.hasK(k)&&_this.hasPropsByK(k)&&typeof props==="object"){var updated=_objectSpread({},_this.getPropsByK(k),{},props);Object.keys(updated).forEach(function(key){if(updated[key]===undefined||updated[key]===null)delete updated[key]});_this.setKProps(k,updated)}};this._map=new Map;this._weakMap=new WeakMap};module.exports=Container;