"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=!0,exports.default=void 0;var _jquery=_interopRequireDefault(require("jquery"));require("jquery-ui-dist/jquery-ui.min.js"),require("jquery-ui-dist/jquery-ui.min.css");var _fontAwesomeMin=_interopRequireDefault(require("font-awesome/css/font-awesome.min.css")),_DomElement=_interopRequireDefault(require("../element/DomElement")),_configs=require("./configs"),PopupWindow=function(){function e(e){void 0===e&&(e={});var t=e,i=t.windowStyle,n=t.windowMaxStyle,s=t.windowMinStyle,o=t.title,r=void 0===o?"My Window":o,l=t.bodyHTML,d=void 0===l?_configs.defaultBodyHtml:l,a=t.events,u=void 0===a?{}:a,f=t.draggableOptions,h=t.resizableOptions;this._opened=!1,this.isOpen=this.isOpen.bind(this),this._windowStyle=Object.assign({},_configs.windowDefaultStyle,i),this._windowMaxStyle=Object.assign({},_configs.windowDefaultMaxStyle,n),this._windowMinStyle=Object.assign({},_configs.windowDefaultMinStyle,s),this._draggableOptions=Object.assign({},_configs.defaultDraggableOptions,f),this._resizableOptions=Object.assign({},_configs.defaultResizableOptions,h),this.title=r,this.bodyHtml=d,this.events=u,this._closeBtn=this._btnGen("CLOSE"),this._minBtn=this._btnGen("MIN"),this._maxBtn=this._btnGen("MAX"),this._btnGroup=this._btnGroupGen(this._closeBtn,this._minBtn,this._maxBtn),this._window=this._windowGen.call(this),this._bindEvents=this._bindEvents.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this)}var t=e.prototype;return t.isOpen=function(){return this._opened},t._setStyle=function(n,e){"object"==typeof n&&null!==n&&"object"==typeof e&&null!==e&&Object.entries(e).forEach(function(e){var t=e[0],i=e[1];return n.style[t]=i})},t._windowGen=function(){var e=new _DomElement.default("div").setStyle(this._windowStyle).get();return e.innerHTML='\n          <div style="height: 20px; text-align: center;">'+this.title+'</div>\n          <div style="height: 100%; margin: 10px; display: flex; border: 0.5px solid rgba(0, 0, 0, 0.1); flex-flow: row wrap;">\n              '+this.bodyHtml+"\n          </div>\n      ",e.appendChild(this._btnGroup),e},t._btnGen=function(t){var e;return e="CLOSE"===t?_configs.closeBtnStyle:"MIN"===t?_configs.minBtnStyle:_configs.maxBtnStyle,new _DomElement.default("i").workOnClassList(function(e){e.add(_fontAwesomeMin.default.fa),e.add(_fontAwesomeMin.default["fa-circle"]),e.add("cicero-popup-window-btn-"+t.toLowerCase())}).set("aria-hidden","true").setStyle(e).get()},t._btnGroupGen=function(){var e;return(e=new _DomElement.default("div").setStyle(_configs.btnGroupStyle)).append.apply(e,arguments).get()},t._bindEvents=function(){var t=this;if(this.isOpen()&&this._window){var e=this.events,i=e.beforeClose,n=e.afterClose,s=e.beforeMinimize,o=e.afterMinimize,r=e.beforeMaximize,l=e.afterMaximize;this._closeBtn.addEventListener("click",function(e){return t.close(e,i,n)},!1),this._minBtn.addEventListener("click",function(e){return t.minimize(e,s,o)},!1),this._maxBtn.addEventListener("click",function(e){return t.maximize(e,r,l)},!1)}},t.open=function(){if(!this.isOpen()&&this._window){var e=this.events,t=e.beforeOpen,i=e.afterOpen;"function"==typeof t&&t(),document.body.appendChild(this._window),this._opened=!0,this._bindEvents(),(0,_jquery.default)(this._window).draggable(this._draggableOptions).resizable(this._resizableOptions),"function"==typeof i&&i()}},t.close=function(e,t,i){this.isOpen()&&this._window&&("function"==typeof t&&t(e),document.body.removeChild(this._window),this._opened=!1,"function"==typeof i&&i(e))},t.minimize=function(e,t,i){"function"==typeof t&&t(e),this._setStyle(this._window,this._windowMinStyle),"function"==typeof i&&i(e)},t.maximize=function(e,t,i){"function"==typeof t&&t(e),this._setStyle(this._window,this._windowMaxStyle),"function"==typeof i&&i(e)},e}();exports.default=PopupWindow;