"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _jquery=_interopRequireDefault(require("jquery"));require("jquery-ui-dist/jquery-ui.min.js");require("jquery-ui-dist/jquery-ui.min.css");var _fontAwesomeMin=_interopRequireDefault(require("font-awesome/css/font-awesome.min.css"));var _DomElement=_interopRequireDefault(require("../element/DomElement"));var _configs=require("./configs");var PopupWindow=function PopupWindow(props){var _this=this;if(props===void 0){props={}}this.isOpen=function(){return _this._opened};this._windowGen=function(){var window=new _DomElement.default("div").workOnClassList(function(x){return x.add("cicero-popup-window")}).setStyle(_this._windowStyle).get();window.innerHTML='\n          <div class="cicero-popup-window-title" style="height: 20px; text-align: center;">'+_this.title+'</div>\n          <div class="cicero-popup-window-body" style="height: 100%; margin: 10px; display: flex; border: 0.5px solid rgba(0, 0, 0, 0.1); flex-flow: row wrap;">\n              '+_this.bodyHtml+"\n          </div>\n      ";window.appendChild(_this._btnGroup);return window};this._btnGen=function(btnType){var style;if(btnType==="CLOSE"){style=_configs.closeBtnStyle}else if(btnType==="MIN"){style=_configs.minBtnStyle}else{style=_configs.maxBtnStyle}return new _DomElement.default("i").workOnClassList(function(x){x.add(_fontAwesomeMin.default.fa);x.add(_fontAwesomeMin.default["fa-circle"]);x.add("cicero-popup-window-btn-"+btnType.toLowerCase())}).set("aria-hidden","true").setStyle(style).get()};this._btnGroupGen=function(){var _setStyle;return(_setStyle=new _DomElement.default("div").setStyle(_configs.btnGroupStyle)).append.apply(_setStyle,arguments).get()};this._bindEvents=function(){if(_this.isOpen()&&_this._window){var _this$events=_this.events,beforeClose=_this$events.beforeClose,afterClose=_this$events.afterClose,beforeMinimize=_this$events.beforeMinimize,afterMinimize=_this$events.afterMinimize,beforeMaximize=_this$events.beforeMaximize,afterMaximize=_this$events.afterMaximize;_this._closeBtn.addEventListener("click",function(e){return _this.close(e,beforeClose,afterClose)},false);_this._minBtn.addEventListener("click",function(e){return _this.minimize(e,beforeMinimize,afterMinimize)},false);_this._maxBtn.addEventListener("click",function(e){return _this.maximize(e,beforeMaximize,afterMaximize)},false)}};this.open=function(){if(!_this.isOpen()&&_this._window){var _this$events2=_this.events,beforeOpen=_this$events2.beforeOpen,afterOpen=_this$events2.afterOpen;typeof beforeOpen==="function"&&beforeOpen();document.body.appendChild(_this._window);_this._opened=true;_this._bindEvents();(0,_jquery.default)(_this._window).draggable(_this._draggableOptions).resizable(_this._resizableOptions);typeof afterOpen==="function"&&afterOpen()}};this.close=function(e,beforeClose,afterClose){if(_this.isOpen()&&_this._window){typeof beforeClose==="function"&&beforeClose(e);document.body.removeChild(_this._window);_this._opened=false;typeof afterClose==="function"&&afterClose(e)}};this.minimize=function(e,beforeMinimize,afterMinimize){typeof beforeMinimize==="function"&&beforeMinimize(e);_this._window=new _DomElement.default(_this._window).setStyle(_this._windowMinStyle).get();typeof afterMinimize==="function"&&afterMinimize(e)};this.maximize=function(e,beforeMaximize,afterMaximize){typeof beforeMaximize==="function"&&beforeMaximize(e);_this._window=new _DomElement.default(_this._window).setStyle(_this._windowMaxStyle).get();typeof afterMaximize==="function"&&afterMaximize(e)};var _props=props,windowStyle=_props.windowStyle,windowMaxStyle=_props.windowMaxStyle,windowMinStyle=_props.windowMinStyle,_props$title=_props.title,title=_props$title===void 0?"":_props$title,_props$bodyHTML=_props.bodyHTML,bodyHTML=_props$bodyHTML===void 0?"":_props$bodyHTML,_props$events=_props.events,events=_props$events===void 0?{}:_props$events,draggableOptions=_props.draggableOptions,resizableOptions=_props.resizableOptions;this._opened=false;this._windowStyle=Object.assign({},_configs.windowDefaultStyle,windowStyle);this._windowMaxStyle=Object.assign({},_configs.windowDefaultMaxStyle,windowMaxStyle);this._windowMinStyle=Object.assign({},_configs.windowDefaultMinStyle,windowMinStyle);this._draggableOptions=Object.assign({},_configs.defaultDraggableOptions,draggableOptions);this._resizableOptions=Object.assign({},_configs.defaultResizableOptions,resizableOptions);this.title=title;this.bodyHtml=bodyHTML;this.events=events;this._closeBtn=this._btnGen("CLOSE");this._minBtn=this._btnGen("MIN");this._maxBtn=this._btnGen("MAX");this._btnGroup=this._btnGroupGen(this._closeBtn,this._minBtn,this._maxBtn);this._window=this._windowGen()};exports.default=PopupWindow;