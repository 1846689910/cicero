"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _jquery=_interopRequireDefault(require("jquery"));require("jquery-ui-dist/jquery-ui.min.js");require("jquery-ui-dist/jquery-ui.min.css");var _fontAwesomeMin=_interopRequireDefault(require("font-awesome/css/font-awesome.min.css"));var _DomElement=_interopRequireDefault(require("../element/DomElement"));var _configs=require("./configs");var PopupWindow=function(){function PopupWindow(props){if(props===void 0){props={}}var _props=props,windowStyle=_props.windowStyle,windowMaxStyle=_props.windowMaxStyle,windowMinStyle=_props.windowMinStyle,_props$title=_props.title,title=_props$title===void 0?"My Window":_props$title,_props$bodyHTML=_props.bodyHTML,bodyHTML=_props$bodyHTML===void 0?_configs.defaultBodyHtml:_props$bodyHTML,_props$events=_props.events,events=_props$events===void 0?{}:_props$events,draggableOptions=_props.draggableOptions,resizableOptions=_props.resizableOptions;this._opened=false;this.isOpen=this.isOpen.bind(this);this._windowStyle=Object.assign({},_configs.windowDefaultStyle,windowStyle);this._windowMaxStyle=Object.assign({},_configs.windowDefaultMaxStyle,windowMaxStyle);this._windowMinStyle=Object.assign({},_configs.windowDefaultMinStyle,windowMinStyle);this._draggableOptions=Object.assign({},_configs.defaultDraggableOptions,draggableOptions);this._resizableOptions=Object.assign({},_configs.defaultResizableOptions,resizableOptions);this.title=title;this.bodyHtml=bodyHTML;this.events=events;this._closeBtn=this._btnGen("CLOSE");this._minBtn=this._btnGen("MIN");this._maxBtn=this._btnGen("MAX");this._btnGroup=this._btnGroupGen(this._closeBtn,this._minBtn,this._maxBtn);this._window=this._windowGen.call(this);this._bindEvents=this._bindEvents.bind(this);this.open=this.open.bind(this);this.close=this.close.bind(this)}var _proto=PopupWindow.prototype;_proto.isOpen=function isOpen(){return this._opened};_proto._windowGen=function _windowGen(){var window=new _DomElement.default("div").workOnClassList(function(x){return x.add("cicero-popup-window")}).setStyle(this._windowStyle).get();window.innerHTML='\n          <div class="cicero-popup-window-title" style="height: 20px; text-align: center;">'+this.title+'</div>\n          <div class="cicero-popup-window-body" style="height: 100%; margin: 10px; display: flex; border: 0.5px solid rgba(0, 0, 0, 0.1); flex-flow: row wrap;">\n              '+this.bodyHtml+"\n          </div>\n      ";window.appendChild(this._btnGroup);return window};_proto._btnGen=function _btnGen(btnType){var style;if(btnType==="CLOSE"){style=_configs.closeBtnStyle}else if(btnType==="MIN"){style=_configs.minBtnStyle}else{style=_configs.maxBtnStyle}return new _DomElement.default("i").workOnClassList(function(x){x.add(_fontAwesomeMin.default.fa);x.add(_fontAwesomeMin.default["fa-circle"]);x.add("cicero-popup-window-btn-"+btnType.toLowerCase())}).set("aria-hidden","true").setStyle(style).get()};_proto._btnGroupGen=function _btnGroupGen(){var _setStyle;return(_setStyle=new _DomElement.default("div").setStyle(_configs.btnGroupStyle)).append.apply(_setStyle,arguments).get()};_proto._bindEvents=function _bindEvents(){var _this=this;if(this.isOpen()&&this._window){var _this$events=this.events,beforeClose=_this$events.beforeClose,afterClose=_this$events.afterClose,beforeMinimize=_this$events.beforeMinimize,afterMinimize=_this$events.afterMinimize,beforeMaximize=_this$events.beforeMaximize,afterMaximize=_this$events.afterMaximize;this._closeBtn.addEventListener("click",function(e){return _this.close(e,beforeClose,afterClose)},false);this._minBtn.addEventListener("click",function(e){return _this.minimize(e,beforeMinimize,afterMinimize)},false);this._maxBtn.addEventListener("click",function(e){return _this.maximize(e,beforeMaximize,afterMaximize)},false)}};_proto.open=function open(){if(!this.isOpen()&&this._window){var _this$events2=this.events,beforeOpen=_this$events2.beforeOpen,afterOpen=_this$events2.afterOpen;typeof beforeOpen==="function"&&beforeOpen();document.body.appendChild(this._window);this._opened=true;this._bindEvents();(0,_jquery.default)(this._window).draggable(this._draggableOptions).resizable(this._resizableOptions);typeof afterOpen==="function"&&afterOpen()}};_proto.close=function close(e,beforeClose,afterClose){if(this.isOpen()&&this._window){typeof beforeClose==="function"&&beforeClose(e);document.body.removeChild(this._window);this._opened=false;typeof afterClose==="function"&&afterClose(e)}};_proto.minimize=function minimize(e,beforeMinimize,afterMinimize){typeof beforeMinimize==="function"&&beforeMinimize(e);this._window=new _DomElement.default(this._window).setStyle(this._windowMinStyle).get();typeof afterMinimize==="function"&&afterMinimize(e)};_proto.maximize=function maximize(e,beforeMaximize,afterMaximize){typeof beforeMaximize==="function"&&beforeMaximize(e);this._window=new _DomElement.default(this._window).setStyle(this._windowMaxStyle).get();typeof afterMaximize==="function"&&afterMaximize(e)};return PopupWindow}();exports.default=PopupWindow;