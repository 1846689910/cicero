"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;require("bootstrap/dist/css/bootstrap.min.css");var _jquery=_interopRequireDefault(require("jquery"));require("popper.js/dist/popper.min");require("bootstrap/dist/js/bootstrap.min");var _DomElement=_interopRequireDefault(require("../element/DomElement"));var Carousel=function Carousel(id,_carouselItems,options){var _this=this;if(_carouselItems===void 0){_carouselItems=[]}if(options===void 0){options={}}this.get=function(){return _this._carousel};this._genCarousel=function(){var _workOnClassList;var carousel=new _DomElement.default("div").set("id",_this.id).set("data-ride","carousel").workOnClassList(function(x){return x.add("carousel","slide")}).setStyle(_this.options.style);var carouselInner=(_workOnClassList=new _DomElement.default("div").workOnClassList(function(x){return x.add("carousel-inner")})).append.apply(_workOnClassList,_this.carouselItems.map(function(x){return x.get()}));if(_this.options.withIndicators){carousel.append(_this._genCarouselIndicators().get())}carousel.append(carouselInner.get());if(_this.options.withControl){carousel.append.apply(carousel,_this._genCarouselControl().map(function(x){return x.get()}))}return carousel.get()};this._setItemsActive=function(carouselItems){if(carouselItems.every(function(x){return!x.get().classList.contains("active")})){carouselItems[0].get().classList.add("active")}return carouselItems};this._genCarouselIndicators=function(){var ol=new _DomElement.default("ol").workOnClassList(function(x){return x.add("carousel-indicators")});var lis=_this.carouselItems.map(function(x,i){return new _DomElement.default("li").set("data-target","#"+_this.id).set("data-slide-to",""+i).workOnClassList(function(l){return x.get().classList.contains("active")?l.add("active"):""}).get()});return ol.append.apply(ol,lis)};this._genCarouselControl=function(){return["prev","next"].map(function(d){return new _DomElement.default("a").set("href","#"+_this.id).set("role","button").set("data-slide",d).workOnClassList(function(x){return x.add("carousel-control-"+d)}).append(new _DomElement.default("span").set("aria-hidden","true").workOnClassList(function(x){return x.add("carousel-control-"+d+"-icon")}).get(),new _DomElement.default("span").innerHTML(d).workOnClassList(function(x){return x.add("sr-only")}).get())})};this.id=id;this.carouselItems=this._setItemsActive(_carouselItems);this.options=Object.assign({},{withIndicators:true,withControl:true,style:{}},options);this._carousel=this._genCarousel();(0,_jquery.default)(this._carousel).carousel()};exports.default=Carousel;